###　データベースのロールバックとリセットについて

## ロールバックについて

ロールバックとは、テーブルを昔の状態に戻す処理のことであり、
```
rails db :rollback
```
を実行すると、直近のマイグレーション済みの処理を一つ戻すことができ、
```
rails db:rollback STEP=3
```
を実行すればSTEPパラメータにより、3つロールバックすることができる。

**$ rails db:migrate**はマイグレーション未実施のマイグレーションファイルの内容が実行され、DBに反映されるたえ、ロールバックはこの逆の処理のことを言う。

## リセットについて

データベースをリセットする場合、**$ rails db:reset**と**$ rails db:migrate:reset**の2通りある。
```
$ rails db:reset
```
を実行した場合、**db/schema.rb**をもとにDBを作成し、**db/migrate/xx.rb**は使われない。

つまり、マイグレーションファイルを編集しても、その内容は反映されずスキーマファイルだけを利用する。
- データベースの作成
- スキーマの読み込み
- シードデータを使用したデータベースの初期化
この３つの処理が実行される。
一方で、
```
$ rails db:migrate:reset
```
を実行した場合、DBを削除した後に、db/migrate/xx.rbを古い順から実行する。

つまり、マイグレーションファイルを直接利用するため、変更が反映される。
